(this.webpackJsonpquizapp=this.webpackJsonpquizapp||[]).push([[0],{23:function(e,t,r){e.exports=r.p+"static/media/loading.7627bc82.svg"},25:function(e,t,r){e.exports=r(57)},30:function(e,t,r){},55:function(e){e.exports=JSON.parse('{"backendEndpoint":"https://cors-anywhere.herokuapp.com/http://ec2-18-212-193-167.compute-1.amazonaws.com:8080/api/"}')},56:function(e,t,r){},57:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(7),u=r.n(c),i=(r(30),r(6)),s=r(4),o=r(22),l=r(2),p="INIT",d="LOADING",m="STARTED",f="SUBMITTING",v="ENDED",h="LOAD_QUIZ",E="START_QUIZ",b="START_QUIZ_FAIL",w="SELECT_ANSWER",g="START_SUBMIT_QUIZ",q="FAIL_SUBMIT_QUIZ",x="SHOW_REPORT",y="RESET",I={currentView:p,quizId:null,quizTitle:null,questions:[],score:null,errorMsg:null};var O=r(24);function z(e){var t=e.index,r=e.question,n=e.selectAnswer,c="q"+t,u=function(e){return c+"a"+e};return a.a.createElement("div",{className:"question-cont"},a.a.createElement("div",{className:"question"},r.text),a.a.createElement("div",{className:"options"},r.options.map((function(e,i){return a.a.createElement("div",{className:"option",key:i},a.a.createElement("input",{id:u(i),type:"radio",name:c,checked:i===r.answer,onChange:function(){return n(t,i)}}),a.a.createElement("label",{htmlFor:u(i)},e))}))))}var N=r(23),T=r.n(N),j=a.a.createElement("img",{className:"spinner",src:T.a,alt:"Loading..."});function k(e){var t=Object(l.a)({},e,{loading:void 0});return a.a.createElement("button",t,e.loading?j:e.children)}var M=r(3),S=r.n(M),A=r(5),V=r(11),Q=r.n(V),R=r(55).backendEndpoint;function _(e){return D.apply(this,arguments)}function D(){return(D=Object(A.a)(S.a.mark((function e(t){var r,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.a.get(R+"quiz/"+t);case 3:return r=e.sent,e.abrupt("return",{data:r.data});case 7:return e.prev=7,e.t0=e.catch(0),n=e.t0.response?e.t0.response.status:500,e.abrupt("return",{error:n});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function U(e,t){return B.apply(this,arguments)}function B(){return(B=Object(A.a)(S.a.mark((function e(t,r){var n,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.a.post(R+"quiz/"+t+"/verify",r);case 3:return n=e.sent,e.abrupt("return",{data:n.data});case 7:return e.prev=7,e.t0=e.catch(0),a=e.t0.response?e.t0.response.status:500,e.abrupt("return",{error:a});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var C=function(e){switch(e){case 404:return"No quiz with that ID";case 429:return"Too many requests. Backend is rate limited to mitigate DoS. Please try again later.";default:return"Oops! Something went wrong"}};var L=Object(s.b)((function(e){return{currentView:e.currentView,title:e.quizTitle,errorMsg:e.errorMsg,questions:e.questions}}),{selectAnswer:function(e,t){return{type:w,data:{qIndex:e,aIndex:t}}},submitQuiz:function(){return function(){var e=Object(A.a)(S.a.mark((function e(t,r){var n,a,c,u;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:g}),n=r(),e.next=4,U(n.quizId,n.questions.map((function(e){return e.answer})));case 4:if(!(a=e.sent).error){e.next=9;break}return c=C(a.error),t({type:q,data:{errorMsg:c}}),e.abrupt("return");case 9:u=a.data,t({type:x,data:{score:u.score}});case 11:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}})((function(e){var t=e.currentView,r=e.title,n=e.questions,c=e.errorMsg,u=e.selectAnswer,i=e.submitQuiz,s=t===f;return a.a.createElement("div",{className:"container"},a.a.createElement("h2",null,r),a.a.createElement("div",{className:"question-list"},n.map((function(e,t){return a.a.createElement(z,{key:t,index:t,question:e,selectAnswer:u})}))),a.a.createElement("div",{className:"flx flx-right"},a.a.createElement("div",{className:"error"},c),a.a.createElement(k,{onClick:function(){return i()},disabled:s,loading:s},"Submit")))}));var Z=Object(s.b)((function(e){return{title:e.quizTitle,score:e.score}}),{reset:function(){return{type:y}}})((function(e){var t=e.title,r=e.score,n=e.reset;return a.a.createElement("div",{className:"container"},a.a.createElement("h2",null,t," - Report"),a.a.createElement("h3",null,"You scored ",r," ",1===r?"point":"points","!"),a.a.createElement("div",{className:"flx flx-right"},a.a.createElement("button",{onClick:n},"Take Another")))}));var F=Object(s.b)((function(e){return{currentView:e.currentView,errorMsg:e.errorMsg}}),{loadQuiz:function(e){return function(){var t=Object(A.a)(S.a.mark((function t(r){var n,a,c;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:h,data:{quizId:e}}),t.next=3,_(e);case 3:if(!(n=t.sent).error){t.next=8;break}return a=C(n.error),r({type:b,data:{errorMsg:a}}),t.abrupt("return");case 8:c=n.data,r({type:E,data:{title:c.title,questions:c.questions}});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.currentView,r=e.errorMsg,c=e.loadQuiz,u=Object(n.useState)(""),i=Object(O.a)(u,2),s=i[0],o=i[1],l=t===d;return a.a.createElement(a.a.Fragment,null,(t===p||t===d)&&a.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==s&&c(s)}},a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"flx flx-left"},a.a.createElement("input",{id:"quiz-id",type:"text",placeholder:"Enter Quiz ID",autoComplete:"off",disabled:l,value:s,onChange:function(e){return o(e.target.value)}}),a.a.createElement(k,{disabled:l,loading:l},"Start")),a.a.createElement("div",{className:"error flx flx-right"},r))),(t===m||t===f)&&a.a.createElement(L,null),t===v&&a.a.createElement(Z,null))})),W=(r(56),Object(i.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(l.a)({},e,{errorMsg:null,currentView:d,quizId:t.data.quizId});case E:return Object(l.a)({},e,{currentView:m,quizTitle:t.data.title,questions:t.data.questions});case b:return Object(l.a)({},e,{currentView:p,errorMsg:t.data.errorMsg});case w:var r=t.data,n=r.qIndex,a=r.aIndex;return Object(l.a)({},e,{questions:e.questions.map((function(e,t){return t!==n?e:Object(l.a)({},e,{answer:a})}))});case g:return Object(l.a)({},e,{errorMsg:null,currentView:f});case q:return Object(l.a)({},e,{currentView:m,errorMsg:t.data.errorMsg});case x:return Object(l.a)({},e,{errorMsg:null,currentView:v,score:t.data.score});case y:return I;default:return console.warn("[reducer] Unhandled action "+t.type),e}}),Object(i.a)(o.a)));var J=function(){return a.a.createElement(s.a,{store:W},a.a.createElement("div",{className:"app"},a.a.createElement("div",{className:"header"},a.a.createElement("h1",null,"Quiz App"),a.a.createElement("p",null,"A tiny quiz app built with React")),a.a.createElement(F,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[25,1,2]]]);
//# sourceMappingURL=main.7c2a4ab8.chunk.js.map